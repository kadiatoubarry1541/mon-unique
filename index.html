<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>A TOI MON UNIQUE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --accent: #c0392b;
            --bg: #fdf6f0;
            --card: #fff;
            --question-bg: #f0f8ff;
            --response-bg: #f5f5f5;
            --text-color: #333;
            --section-bg: #fff8f8;
            --game-bg: rgba(0, 0, 0, 0.7);
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg);
            color: var(--text-color);
            margin: 0;
            line-height: 1.6;
        }
        
        .wrap {
            max-width: 1100px;
            margin: 24px auto;
            padding: 18px;
        }
        
        h1, h2 {
            text-align: center;
            color: var(--accent);
            margin: .4em 0;
        }
        
        .quote {
            font-style: italic;
            background: #fff;
            padding: 12px;
            border-left: 4px solid var(--accent);
            border-radius: 6px;
            margin-bottom: 18px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .section {
            background: var(--card);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .section-avant { background-color: var(--section-bg); }
        .section-avec { background-color: #f0fff0; }
        .section-apres { background-color: #f5f0ff; }
        
        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 12px;
        }
        
        .media-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            display: block;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }
        
        video, audio {
            width: 100%;
            border-radius: 8px;
            background: #000;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }
        
        .caption {
            font-size: .95rem;
            padding-top: 6px;
            text-align: center;
            color: #555;
            font-weight: bold;
        }
        
        .final {
            text-align: center;
            margin-top: 20px;
            font-weight: 600;
            padding: 20px;
            background: var(--card);
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .btn {
            background: var(--accent);
            color: #fff;
            padding: 12px 18px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        textarea {
            width: 100%;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #ddd;
            resize: vertical;
            font-size: 1rem;
            background: var(--question-bg);
            color: var(--text-color);
        }
        
        textarea:focus {
            outline: 2px solid var(--accent);
            border-color: transparent;
        }
        
        .responses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .response-item {
            background: var(--response-bg);
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            position: relative;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .response-header {
            display: flex;
            justify-content: space-between;
            font-size: 0.9em;
            margin-bottom: 10px;
            color: #666;
        }
        
        .response-text {
            white-space: pre-wrap;
            margin-bottom: 10px;
            line-height: 1.5;
            font-size: 1.1rem;
            color: #222;
        }
        
        .response-media {
            margin-top: 15px;
        }
        
        .delete-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: transparent;
            border: none;
            color: #c0392b;
            cursor: pointer;
            font-size: 18px;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .delete-btn:hover {
            background: rgba(192, 57, 43, 0.1);
        }
        
        .no-responses {
            text-align: center;
            padding: 30px;
            font-style: italic;
            color: #777;
            background: var(--response-bg);
            border-radius: 8px;
        }
        
        .response-actions {
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }
        
        .file-input-wrapper {
            position: relative;
            margin: 15px 0;
        }
        
        .file-input-wrapper input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        .file-input-label {
            display: block;
            background: #e0e0e0;
            padding: 12px 15px;
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
        }
        
        .file-input-label:hover {
            background: #d0d0d0;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 1.1rem;
            color: #444;
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            border-radius: 6px;
            border: 1px solid #ddd;
            font-size: 1rem;
            background: #fff;
        }
        
        .confirmation-message {
            text-align: center;
            padding: 12px;
            background: #4CAF50;
            color: white;
            border-radius: 6px;
            margin-top: 15px;
            display: none;
            font-weight: bold;
        }
        
        .game-section {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin-top: 40px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.5);
        }
        
        .game-container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px;
            background: var(--game-bg);
            border-radius: 20px;
        }
        
        .game-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        .game-description {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.2rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            color: #e0e0e0;
        }
        
        .game-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }
        
        .game-panel {
            background: rgba(30, 30, 50, 0.8);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .account-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 20px 0;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }
        
        .ablay .account-value { color: #4CAF50; }
        .koolo .account-value { color: #2196F3; }
        .depot .account-value { color: #FF9800; }
        
        .game-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .game-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary { background: linear-gradient(to right, #4CAF50, #2E7D32); color: white; }
        .btn-secondary { background: linear-gradient(to right, #2196F3, #0D47A1); color: white; }
        
        .game-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .game-btn:active:not(:disabled) { transform: translateY(1px); }
        
        .game-log {
            margin-top: 30px;
            background: rgba(20, 20, 40, 0.8);
            border-radius: 15px;
            padding: 25px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .log-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #ffd700;
        }
        
        .log-entry {
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .log-entry.ablay { border-left: 4px solid #4CAF50; }
        .log-entry.koolo { border-left: 4px solid #2196F3; }
        
        .navigation {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }
        
        .nav-btn {
            padding: 15px 30px;
            font-size: 1.1rem;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        
        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }
        
        /* Styles sp√©cifiques au jeu */
        .accounts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .account {
            background: rgba(30, 30, 50, 0.8);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 2px solid transparent;
        }
        
        .account.active {
            border-color: #ffd700;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4), 0 0 20px rgba(255, 215, 0, 0.3);
        }
        
        .account-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .game-panel {
            background: rgba(20, 20, 40, 0.8);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }
        
        .panel-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .panel-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #ffd700;
        }
        
        .panel-content {
            margin-top: 20px;
        }
        
        .game-panel textarea {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 1.1rem;
            resize: vertical;
            margin-bottom: 15px;
        }
        
        .game-panel textarea:focus {
            outline: 2px solid #ffd700;
        }
        
        .game-panel .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 10px;
            width: 100%;
        }
        
        .btn-tertiary { background: linear-gradient(to right, #9C27B0, #6A1B9A); color: white; }
        .btn-warning { background: linear-gradient(to right, #FF9800, #EF6C00); color: white; }
        
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .transaction-log {
            background: rgba(20, 20, 40, 0.8);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            max-height: 300px;
            overflow-y: auto;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }
        
        .log-entry {
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .log-entry.guest { border-left: 4px solid #9C27B0; }
        .log-entry.system { border-left: 4px solid #ffd700; }
        
        .log-icon { font-size: 1.5rem; }
        .log-content { flex: 1; }
        .log-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
            color: #aaa;
        }
        
        .guest-section {
            background: rgba(20, 20, 40, 0.8);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            margin-bottom: 20px;
        }
        
        .guest-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            color: #9C27B0;
        }
        
        .guest-input {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .guest-input input {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 1.1rem;
        }
        
        .guests-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .guest-card {
            background: rgba(50, 30, 60, 0.8);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .guest-name { font-weight: 600; }
        .guest-amount { margin-left: auto; font-weight: 700; color: #9C27B0; }
        
        .transfer-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
        }
        
        .money-transfer {
            background: rgba(30, 30, 50, 0.95);
            padding: 50px;
            border-radius: 20px;
            text-align: center;
            border: 3px solid #ffd700;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.5);
        }
        
        .money-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            color: #ffd700;
        }
        
        .transfer-text {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: white;
        }
        
        .transfer-amount {
            font-size: 3.5rem;
            font-weight: 800;
            color: #4CAF50;
            text-shadow: 0 0 20px rgba(76, 175, 80, 0.7);
        }
        
        .negative {
            color: #F44336;
            text-shadow: 0 0 20px rgba(244, 67, 54, 0.7);
        }
        
        .status-bar {
            display: flex;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 15px 25px;
            margin-top: 30px;
            font-size: 1.1rem;
        }
        
        .turn-indicator {
            background: #ffd700;
            color: #000;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 700;
        }
        
        .question-status {
            text-align: center;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-weight: bold;
        }
        
        .question-asked {
            background-color: #4CAF50;
            color: white;
        }
        
        .question-answered {
            background-color: #2196F3;
            color: white;
        }
        
        /* Media queries pour la responsivit√© */
        @media (max-width: 768px) {
            .wrap {
                padding: 10px;
            }
            
            .response-actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .media-grid {
                grid-template-columns: 1fr;
            }
            
            .game-content {
                grid-template-columns: 1fr;
            }
            
            .accounts-container {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .section {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            h2 {
                font-size: 1.5rem;
            }
            
            .navigation {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <h2>A TOI MON HOMME</h2>
    <p class="quote">MON COEUR EST REMPLI PAR TON AMOUR. <br>
    TES PRINCIPES SONT MES LIMITES ET TES DESIRS SONT MA DIRECTION.</p>
        
        <h1>MON AMOUR = PAIX ! CAR C'EST LA BASE DE MES PRINCIPES</h1>
        <p class="quote">"Et parmi Ses signes, Il a cr√©√© pour vous, de vous-m√™mes, des √©pouses pour que vous viviez en tranquillit√© avec elles et Il a mis entre vous de l‚Äôamour et de la bont√©." (Coran, 30:21)</p>
        
        <div class="navigation">
            <button class="nav-btn" onclick="scrollToSection('sec-avant')">Ma vie avant toi</button>
            <button class="nav-btn" onclick="scrollToSection('sec-avec')">Ma vie avec toi</button>
            <button class="nav-btn" onclick="scrollToSection('sec-apres')">Ma vie √† partir d'aujourd'hui</button>
            <button class="nav-btn" onclick="scrollToSection('game-section')">Jouer au jeu</button>
        </div>

        <!-- SECTION AVANT -->
        <div class="section section-avant" id="sec-avant">
            <h2>Ma vie avant toi</h2>
            <p>
                Je suis toujours rest√©e seule et j‚Äôai travaill√© dur  
                esp√©rant te rencontrer, l‚Äôhomme de ma vie, et je voulais vraiment qu‚Äôil soit satisfait de moi.<br>
                Malgr√© que je ne t'avais pas encore trouv√©, je me disais toujours que tu existes et j'√©tais heureuse.<br>
                Juste du fait que je t'attendais et que je me pr√©parais,<br>
                je prenais tout mon temps sur les √©tudes et maintenant que je t'ai trouv√©,<br>
                tu veux me retirer toute la paix que j'avais.<br>
                Avant mon c≈ìur souffrait de ton absence.<br>
                Veux-tu encore que mon c≈ìur souffre de ta pr√©sence ?
            </p>
            <div class="media-grid" id="grid-avant">
                <!-- Photos (5) -->
                <div class="media-container"><img src="avant/IMG_20220529_025543_342~2.jpg" alt="Avant 1"></div>
                <div class="media-container"><img src="avant/20240120-100200.jpg" alt="Avant 2"></div>
                <div class="media-container"><img src="avant/20240716_175927.jpg" alt="Avant 3"></div>
                <div class="media-container"><img src="avant/Screenshot_20250414_143341_Video Player.jpg" alt="Avant 4"></div>
                <div class="media-container"><img src="avant/IMG_20180101_015437~2.jpg" alt="Avant 5"></div>

                <!-- Videos (1) -->
                <div class="media-container"><video controls preload="metadata"><source src="avant/VID20240205033234.mp4" type="video/mp4">Votre navigateur ne supporte pas la vid√©o.</video></div>

                <!-- Audio (1) -->
                <div class="media-container" style="grid-column:1/-1">
                    <div class="caption">√âcoute : je suis vraiment d√©sol√©e, je ne savais pas que √ßa comptait pour toi</div>
                    <audio controls preload="metadata"><source src="avant/Voix 002.m4a" type="audio/mpeg">Votre navigateur ne supporte pas l'audio.</audio>
                </div>
            </div>
        </div>

        <!-- SECTION AVEC -->
        <div class="section section-avec" id="sec-avec">
            <h2>Ma vie avec toi</h2>
            <p>
                J'√©tais tellement heureuse et si cela avait dur√©, √ßa m'aurait vraiment √©tonn√©e car j'√©tais<br>
                trait√©e comme une reine.<br>
                Pourtant, j'ai toujours appris que la femme doit √™tre forte car vous les hommes, vous ne savez pas Bien-Aim√©.
            </p>
            <div class="media-grid" id="grid-avec">
                <div class="media-container"><img src="avec/IMG-20250424-WA0006.jpg" alt="Avec 1"></div>
                <div class="media-container"><img src="avec/photo_avant1.jpg" alt="Avec 2"></div>
                <div class="media-container"><img src="avec/Screenshot_20241015_193039_Video Player.jpg" alt="Avec 3"></div>
                <div class="media-container"><img src="avec/IMG_20180106_032624~2.jpg" alt="Avec 4"></div>
                <div class="media-container"><img src="avec/IMG-20250615-WA0017.jpg" alt="Avec 5"></div>
                <div class="media-container"><video controls preload="metadata"><source src="avec/VID-20250523-WA0060.mp4" type="video/mp4">Votre navigateur ne supporte pas la vid√©o.</video></div>
                <div class="media-container"><video controls preload="metadata"><source src="avec/Kb.mp4" type="video/mp4">Votre navigateur ne supporte pas la vid√©o.</video></div>
                <div class="media-container" style="grid-column:1/-1">
                    <div class="caption">√âcoute : Notre bien ce vocal car je ne veux pas revenir pour r√©p√©ter cela</div>
                    <audio controls preload="metadata"><source src="avec/Mon bb.m4a" type="audio/mpeg">Votre navigateur ne supporte pas l'audio.</audio>
                </div>
            </div>
        </div>

        <!-- SECTION APRES -->
        <div class="section section-apres" id="sec-apres">
            <h2>Ma vie √† partir d‚Äôaujourd‚Äôhui</h2>
            <p>Je d√©cide de rester derri√®re toi,<br>
                donc je ne veux plus me plaindre.<br>
                Je veux continuer mon chemin comme s'il n'y avait rien,<br>
                car tu veux me rendre folle.
            </p>
            <div class="media-grid" id="grid-apres">
                <div class="media-container"><img src="apres/Screenshot_20250125_125401_Gallery.jpg" alt="Apr√®s 1"></div>
                <div class="media-container"><img src="apres/20240506_131926.jpg" alt="Apr√®s 2"></div>
                <div class="media-container"><img src="apres/20230507_151958-1.jpg" alt="Apr√®s 3"></div>
                <div class="media-container"><img src="apres/20230507_130427.jpg" alt="Apr√®s 4"></div>
                <div class="media-container"><img src="apres/20230514_181118.jpg" alt="Apr√®s 5"></div>
                <div class="media-container"><video controls preload="metadata"><source src="Video_20250809_113747.mp4" type="video/mp4">Votre navigateur ne supporte pas la vid√©o.</video></div>
                <div class="media-container"><video controls preload="metadata"><source src="Video_20250523_112832.mp4" type="video/mp4">Votre navigateur ne supporte pas la vid√©o.</video></div>
                <div class="media-container" style="grid-column:1/-1">
                    <audio controls preload="metadata"><source src="apres/11.m4a" type="audio/mpeg">Votre navigateur ne supporte pas l'audio.</audio>
                </div>
            </div>
        </div>

        <!-- Message final -->
        <div class="final">
            <p>Je t‚Äôaime de tout mon c≈ìur, et je prie Allah pour qu‚ÄôIl te prot√®ge et te guide toujours. Profite de cette surprise, mon amour !<br>
                ‚Ä¢ üåü Un amour sinc√®re et respectueux<br>
                ‚Ä¢ ü§≤ Des pri√®res constantes pour toi<br>
                ‚Ä¢ ü´∂ Une pr√©sence stable et douce, comme l‚ÄôIslam le recommande<br>
                ‚Ä¢ üìñ Une volont√© de b√¢tir un avenir ensemble, selon les r√®gles d'Allah<br>
                ‚Ä¢ üéÅ Et des surprises... comme celle-ci üíñ<br><br>
                TAPE CE BOUTON EN BAS POUR VOIR UN MESSAGE TR√àS IMPORTANT
            </p>
            <button class="btn" onclick="document.getElementById('loveMessage').style.display='block'">üíñTAPE ICIüíñ</button>
            <p id="loveMessage" style="display:none;margin-top:20px;font-weight:700;white-space: pre-line;padding:20px;background:#fff8f8;border-radius:8px;">
                Tu es ma lumi√®re, et je suis tellement heureuse de construire notre vie ensemble, insha‚ÄôAllah.
                <br><br>
                J‚Äôai appris avec la famille et la religion que la femme = soumission donc je ne cherche pas √† avoir la force sur toi
                mais juste une lumi√®re.
                Si tu agis maintenant, c‚Äôest la seule chose que tu ne regretteras jamais, sinon si tu as peur tu vas le regretter toute ta vie car tu n‚Äôauras jamais quelqu‚Äôun qui t‚Äôaime comme moi.
                Car moi j‚Äôai vraiment perdu la t√™te et je t‚Äôai donn√© tout mon c≈ìur car j‚Äôai pass√© toute ma vie √† attendre. 1 SEUL ET DIEU EST MON T√âMOIN.
                <br><br>
                Comment est-ce que je peux te demander plus de 7 fois de me laisser mais tu n‚Äôy arrives pas ?
                Je me demande si tout √ßa c‚Äôest l‚Äôamour seulement, m√™me moi je ne veux plus te fatiguer en t‚Äôinvitant √† te pr√©senter.
                Si tu dors tu ne me trouveras pas ici car maman va faire un choix pour moi, et je serai loin de toi mais si c‚Äôest √ßa ton d√©sir,
                je reste soumise nani mon grand.
                <br><br>
                J‚Äôai toujours √©t√© d‚Äôaccord avec ma m√®re, c‚Äôest seulement √† cause de toi que je me dispute avec elle, et je ne peux pas supporter longtemps.
                <br>
                Je m‚Äôexcuse pour mes erreurs, vraiment tout, et je n‚Äôai plus de mot pour toi !
                <br>
                JE T‚ÄôAIME ET JE VEUX TON C≈íUR OU RIEN.
                <br>
                J‚Äôai la foi en DIEU, si tu me refuses y‚Äôa aucun mal, je tourne mon c≈ìur vers DIEU car je passe tout mon temps avec lui.
                <br><br>
                Lorsque tu n‚Äô√©tais que l‚Äôespoir dans mon c≈ìur,
                <br>
                Je ne veux plus te parler car tu es ma bouche;
            </p>
        </div>

        <!-- Section r√©ponse am√©lior√©e -->
        <div class="section">
            <h2>R√©ponds-moi ‚ù§Ô∏è</h2>
            <p>Tu peux m‚Äô√©crire un petit message ou m‚Äôenvoyer une photo, une vid√©o ou un audio directement ici mais de petite taille :</p>




</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-images"></i> Mon Site de M√©dias</h1>
            <p class="subtitle">Publiez et consultez vos photos, vid√©os et audios √† tout moment - Stockage persistant garanti</p>
        </header>
        
        <section class="upload-section">
            <div class="type-selector">
                <div class="type-btn active" data-type="all">
                    <i class="fas fa-images"></i> Tous
                </div>
                <div class="type-btn" data-type="photo">
                    <i class="fas fa-camera"></i> Photos
                </div>
                <div class="type-btn" data-type="video">
                    <i class="fas fa-video"></i> Vid√©os
                </div>
                <div class="type-btn" data-type="audio">
                    <i class="fas fa-music"></i> Audios
                </div>
            </div>
            
            <div class="upload-box" id="dropZone">
                <i class="fas fa-cloud-upload-alt"></i>
                <h3>D√©posez vos m√©dias ici</h3>
                <p>Vos photos, vid√©os et audios resteront disponibles m√™me apr√®s 10 jours!</p>
                <label for="mediaInput" class="file-label">
                    <i class="fas fa-folder-open"></i> S√©lectionner un m√©dia
                </label>
                <input type="file" id="mediaInput" accept="image/*,video/*,audio/*" class="file-input">
                <div class="file-info">
                    Formats accept√©s: JPG, PNG, GIF, MP4, WEBM, MOV, MP3, WAV | Taille maximale: <strong>500 Mo</strong>
                </div>
            </div>
            
            <div class="media-details">
                <div class="form-group">
                    <label for="mediaTitle"><i class="fas fa-heading"></i> Titre du m√©dia:</label>
                    <input type="text" id="mediaTitle" placeholder="Titre descriptif" class="form-input">
                </div>
                
                <div class="form-group">
                    <label for="mediaDescription"><i class="fas fa-align-left"></i> Description:</label>
                    <textarea id="mediaDescription" placeholder="D√©crivez votre m√©dia..." class="form-input"></textarea>
                </div>
            </div>
            
            <div class="preview-container" id="previewContainer">
                <div class="preview-title">Aper√ßu de votre m√©dia:</div>
                <div class="preview-content" id="previewContent"></div>
            </div>
            
            <div class="storage-info">
                <div class="storage-header">
                    <i class="fas fa-database"></i> Espace de stockage utilis√©
                </div>
                <div class="progress-container">
                    <div class="progress-fill" id="progressFill">0%</div>
                </div>
                <div class="storage-text" id="storageText">0 Mo / 500 Mo utilis√©s</div>
            </div>
            
            <button class="publish-btn" id="publishBtn">
                <i class="fas fa-paper-plane"></i> Publier le m√©dia
            </button>
        </section>
        
        <section class="published-media">
            <h2 class="section-title">
                <i class="fas fa-history"></i> M√©dias publi√©s
                <span id="mediaCount">(0)</span>
            </h2>
            <div class="media-grid" id="mediaGrid">
                <div class="no-media" id="noMediaMessage">
                    <i class="fas fa-box-open fa-3x" style="margin-bottom: 20px;"></i>
                    <p>Aucun m√©dia publi√© pour le moment</p>
                    <p>Commencez par publier votre premier m√©dia !</p>
                </div>
            </div>
        </section>
    </div>
    
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">M√©dia publi√© avec succ√®s!</span>
    </div>

    <script>
        // Configuration de la base de donn√©es
        const DB_NAME = 'MediaDatabase';
        const STORE_NAME = 'medias';
        const MAX_STORAGE_MB = 500; // 500 Mo d'espace de stockage
        
        let db;
        let selectedMedia = null;
        let currentFilter = 'all';

        // Initialiser la base de donn√©es
        function initDB() {
            return new Promise((resolve, reject) => {
                const request = indexedDB.open(DB_NAME, 2);
                
                request.onupgradeneeded = (event) => {
                    db = event.target.result;
                    if (!db.objectStoreNames.contains(STORE_NAME)) {
                        // Cr√©er le store pour les m√©dias
                        const store = db.createObjectStore(STORE_NAME, { 
                            keyPath: 'id',
                            autoIncrement: true 
                        });
                        
                        // Cr√©er des index pour faciliter les recherches
                        store.createIndex('title', 'title', { unique: false });
                        store.createIndex('date', 'date', { unique: false });
                        store.createIndex('type', 'type', { unique: false });
                    }
                };
                
                request.onsuccess = (event) => {
                    db = event.target.result;
                    resolve();
                    updateStorageInfo();
                    loadMedias();
                };
                
                request.onerror = (event) => {
                    reject('Erreur IndexedDB: ' + event.target.error);
                };
            });
        }

        // Charger tous les m√©dias
        function loadMedias(filter = 'all') {
            const transaction = db.transaction([STORE_NAME], 'readonly');
            const store = transaction.objectStore(STORE_NAME);
            let request;
            
            if (filter === 'all') {
                request = store.getAll();
            } else {
                const index = store.index('type');
                request = index.getAll(filter);
            }
            
            request.onsuccess = () => {
                const medias = request.result;
                renderMediaGrid(medias);
                
                // Mettre √† jour le compteur de m√©dias
                document.getElementById('mediaCount').textContent = `(${medias.length})`;
                
                if (medias.length === 0) {
                    document.getElementById('noMediaMessage').style.display = 'block';
                } else {
                    document.getElementById('noMediaMessage').style.display = 'none';
                }
            };
        }

        // Afficher la grille de m√©dias
        function renderMediaGrid(medias) {
            const mediaGrid = document.getElementById('mediaGrid');
            mediaGrid.innerHTML = '';
            
            if (medias.length === 0) {
                document.getElementById('noMediaMessage').style.display = 'block';
                return;
            }
            
            // Trier les m√©dias par date (les plus r√©centes en premier)
            medias.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            medias.forEach(media => {
                const mediaItem = createMediaItem(media);
                mediaGrid.appendChild(mediaItem);
            });
        }

        // Cr√©er un √©l√©ment m√©dia
        function createMediaItem(media) {
            const mediaItem = document.createElement('div');
            mediaItem.className = 'media-item';
            mediaItem.dataset.id = media.id;
            mediaItem.dataset.type = media.type;
            
            // Convertir les donn√©es binaires en Blob
            const blob = new Blob([media.fileData], { type: media.mimeType });
            const url = URL.createObjectURL(blob);
            
            let mediaContentHTML = '';
            
            if (media.type === 'photo') {
                mediaContentHTML = `
                    <div class="media-type-indicator">
                        <i class="fas fa-camera"></i> Photo
                    </div>
                    <img src="${url}" alt="${media.title}">
                `;
            } else if (media.type === 'video') {
                mediaContentHTML = `
                    <div class="media-type-indicator">
                        <i class="fas fa-video"></i> Vid√©o
                    </div>
                    <video controls>
                        <source src="${url}" type="${media.mimeType}">
                        Votre navigateur ne supporte pas les vid√©os.
                    </video>
                `;
            } else if (media.type === 'audio') {
                mediaContentHTML = `
                    <div class="media-type-indicator">
                        <i class="fas fa-music"></i> Audio
                    </div>
                    <audio controls>
                        <source src="${url}" type="${media.mimeType}">
                        Votre navigateur ne supporte pas les audios.
                    </audio>
                `;
            }
            
            mediaItem.innerHTML = `
                <div class="media-header">
                    <div class="media-title">${media.title || 'Sans titre'}</div>
                    <div class="media-date">Publi√© le: ${formatDate(media.date)}</div>
                </div>
                <div class="media-content">
                    ${mediaContentHTML}
                </div>
                <div class="media-footer">
                    <div class="media-size">${formatFileSize(media.size)}</div>
                    <button class="delete-btn" data-id="${media.id}">
                        <i class="fas fa-trash"></i> Supprimer
                    </button>
                </div>
            `;
            
            return mediaItem;
        }

        // Ajouter un m√©dia
        function addMedia(file, title, description) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                
                reader.onload = (event) => {
                    // D√©terminer le type de m√©dia
                    let mediaType = '';
                    if (file.type.startsWith('image/')) mediaType = 'photo';
                    else if (file.type.startsWith('video/')) mediaType = 'video';
                    else if (file.type.startsWith('audio/')) mediaType = 'audio';
                    
                    const media = {
                        title: title,
                        description: description,
                        mimeType: file.type,
                        type: mediaType,
                        size: file.size,
                        date: new Date().toISOString(),
                        fileData: event.target.result // Donn√©es binaires du fichier
                    };
                    
                    const transaction = db.transaction([STORE_NAME], 'readwrite');
                    const store = transaction.objectStore(STORE_NAME);
                    const request = store.add(media);
                    
                    request.onsuccess = () => {
                        // Ajouter l'ID g√©n√©r√© automatiquement
                        media.id = request.result;
                        resolve(media);
                        showNotification(`${mediaType === 'photo' ? 'Photo' : mediaType === 'video' ? 'Vid√©o' : 'Audio'} publi√© avec succ√®s!`);
                        updateStorageInfo();
                        loadMedias(currentFilter);
                    };
                    
                    transaction.onerror = (event) => {
                        reject('Erreur lors de la publication: ' + event.target.error);
                    };
                };
                
                // Lire le fichier en tant qu'ArrayBuffer
                reader.readAsArrayBuffer(file);
            });
        }

        // Supprimer un m√©dia
        function deleteMedia(id) {
            const transaction = db.transaction([STORE_NAME], 'readwrite');
            const store = transaction.objectStore(STORE_NAME);
            
            const request = store.delete(id);
            
            request.onsuccess = () => {
                showNotification('M√©dia supprim√© avec succ√®s!');
                updateStorageInfo();
                loadMedias(currentFilter);
            };
        }

        // Mettre √† jour les informations de stockage
        function updateStorageInfo() {
            const transaction = db.transaction([STORE_NAME], 'readonly');
            const store = transaction.objectStore(STORE_NAME);
            const request = store.getAll();
            
            request.onsuccess = () => {
                const medias = request.result;
                let totalSize = 0;
                
                medias.forEach(media => {
                    totalSize += media.size;
                });
                
                const totalMB = (totalSize / (1024 * 1024)).toFixed(2);
                const maxMB = MAX_STORAGE_MB;
                const percent = Math.min(100, (totalMB / maxMB) * 100);
                
                document.getElementById('storageText').textContent = 
                    `${totalMB} Mo / ${maxMB} Mo utilis√©s`;
                
                const progressFill = document.getElementById('progressFill');
                progressFill.style.width = `${percent}%`;
                progressFill.textContent = `${percent.toFixed(1)}%`;
                
                // Changer la couleur si le stockage est presque plein
                if (percent > 90) {
                    progressFill.style.background = 'linear-gradient(90deg, #e74c3c, #c0392b)';
                } else {
                    progressFill.style.background = 'linear-gradient(90deg, #4CAF50, #2E7D32)';
                }
            };
        }

        // Afficher une notification
        function showNotification(message, isError = false) {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            notificationText.textContent = message;
            
            if (isError) {
                notification.className = 'notification error';
            } else {
                notification.className = 'notification';
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // Formater la taille du fichier
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Formater la date
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('fr-FR', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        // Afficher l'aper√ßu du m√©dia
        function showPreview(file) {
            const previewContainer = document.getElementById('previewContainer');
            const previewContent = document.getElementById('previewContent');
            
            previewContainer.style.display = 'block';
            previewContent.innerHTML = '';
            
            if (file.type.startsWith('image/')) {
                const imgElement = document.createElement('img');
                imgElement.src = URL.createObjectURL(file);
                imgElement.alt = "Aper√ßu de l'image";
                previewContent.appendChild(imgElement);
                
                // Ajouter un indicateur de type
                const typeIndicator = document.createElement('div');
                typeIndicator.className = 'media-type-indicator';
                typeIndicator.innerHTML = '<i class="fas fa-camera"></i> Photo';
                previewContent.appendChild(typeIndicator);
                
            } else if (file.type.startsWith('video/')) {
                const videoElement = document.createElement('video');
                videoElement.controls = true;
                videoElement.src = URL.createObjectURL(file);
                videoElement.style.maxWidth = '100%';
                videoElement.style.maxHeight = '400px';
                videoElement.style.borderRadius = '10px';
                previewContent.appendChild(videoElement);
                
                // Ajouter un indicateur de type
                const typeIndicator = document.createElement('div');
                typeIndicator.className = 'media-type-indicator';
                typeIndicator.innerHTML = '<i class="fas fa-video"></i> Vid√©o';
                previewContent.appendChild(typeIndicator);
                
            } else if (file.type.startsWith('audio/')) {
                const audioElement = document.createElement('audio');
                audioElement.controls = true;
                audioElement.src = URL.createObjectURL(file);
                audioElement.style.width = '100%';
                previewContent.appendChild(audioElement);
                
                // Ajouter un indicateur de type
                const typeIndicator = document.createElement('div');
                typeIndicator.className = 'media-type-indicator';
                typeIndicator.innerHTML = '<i class="fas fa-music"></i> Audio';
                previewContent.appendChild(typeIndicator);
            }
        }

        // Initialisation de l'application
        window.addEventListener('DOMContentLoaded', async () => {
            try {
                await initDB();
                
                // √âv√©nements de s√©lection de fichier
                document.getElementById('mediaInput').addEventListener('change', (e) => {
                    if (e.target.files.length > 0) {
                        selectedMedia = e.target.files[0];
                        
                        // V√©rifier la taille du fichier
                        if (selectedMedia.size > MAX_STORAGE_MB * 1024 * 1024) {
                            showNotification(
                                `Le m√©dia d√©passe la taille maximale de ${MAX_STORAGE_MB} Mo!`, 
                                true
                            );
                            return;
                        }
                        
                        showPreview(selectedMedia);
                    }
                });
                
                // Glisser-d√©poser
                const dropZone = document.getElementById('dropZone');
                
                dropZone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    dropZone.classList.add('active');
                });
                
                dropZone.addEventListener('dragleave', () => {
                    dropZone.classList.remove('active');
                });
                
                dropZone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    dropZone.classList.remove('active');
                    
                    if (e.dataTransfer.files.length > 0) {
                        const file = e.dataTransfer.files[0];
                        
                        // V√©rifier que c'est un m√©dia accept√©
                        if (!file.type.startsWith('image/') && 
                            !file.type.startsWith('video/') && 
                            !file.type.startsWith('audio/')) {
                            showNotification('Veuillez d√©poser un fichier image, vid√©o ou audio!', true);
                            return;
                        }
                        
                        // V√©rifier la taille
                        if (file.size > MAX_STORAGE_MB * 1024 * 1024) {
                            showNotification(
                                `Le m√©dia d√©passe la taille maximale de ${MAX_STORAGE_MB} Mo!`, 
                                true
                            );
                            return;
                        }
                        
                        selectedMedia = file;
                        showPreview(selectedMedia);
                    }
                });
                
                // Bouton de publication
                document.getElementById('publishBtn').addEventListener('click', async () => {
                    if (!selectedMedia) {
                        showNotification('Veuillez s√©lectionner un m√©dia!', true);
                        return;
                    }
                    
                    const title = document.getElementById('mediaTitle').value.trim() || 'Mon m√©dia';
                    const description = document.getElementById('mediaDescription').value.trim() || '';
                    
                    try {
                        await addMedia(selectedMedia, title, description);
                        
                        // R√©initialiser le formulaire
                        selectedMedia = null;
                        document.getElementById('previewContainer').style.display = 'none';
                        document.getElementById('mediaTitle').value = '';
                        document.getElementById('mediaDescription').value = '';
                        document.getElementById('mediaInput').value = '';
                    } catch (error) {
                        console.error('Erreur:', error);
                        showNotification('Erreur: ' + error, true);
                    }
                });
                
                // √âv√©nement de suppression (d√©l√©gation d'√©v√©nements)
                document.getElementById('mediaGrid').addEventListener('click', (e) => {
                    if (e.target.closest('.delete-btn')) {
                        const btn = e.target.closest('.delete-btn');
                        const id = parseInt(btn.dataset.id);
                        if (confirm('Voulez-vous vraiment supprimer ce m√©dia?')) {
                            deleteMedia(id);
                        }
                    }
                });
                
                // Filtres par type de m√©dia
                document.querySelectorAll('.type-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        currentFilter = btn.dataset.type;
                        loadMedias(currentFilter);
                    });
                });
                
            } catch (error) {
                console.error('Erreur d\'initialisation:', error);
                showNotification('Erreur: ' + error, true);
            }
        });
    </script>
</body>
</html>

    

      
        
        <!-- Section du jeu -->
    <h1> L'HOMME DE MA VIE VIENS,AMUSONS_NOUS UN PEU </h1
     <p>Les condictions du jeu  et si tu veux ajout√© plus fais moi signe</p>
    
      <p>1 les questions  sont vice versa donc tu dois savoir r√©pondre mais  tu dois aussi te trouver  5 questions √† mes pos√©. <br>
        2 on ne se f√¢che  pas,on √©change  nos id√©es  donc z√©ro dispute  et chacun  dois se sentir¬†¬†√†¬†l'aise et surtout libre.</p>
        <div class="game-section" id="game-section">
            <div class="game-container">
                <h2 class="game-title">Jeu de Partage</h2>
                <p class="game-description">
                    Ablay, Koolo et Invit√©s - Partagez le d√©p√¥t de 50 000 selon vos performances
                </p>

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu de Partage - Ablay, Koolo et Invit√©s</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        .subtitle {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
            color: #e0e0e0;
        }
        
        .accounts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .account {
            background: rgba(30, 30, 50, 0.8);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 2px solid transparent;
        }
        
        .account.active {
            border-color: #ffd700;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4), 0 0 20px rgba(255, 215, 0, 0.3);
        }
        
        .account-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .account-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 20px 0;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }
        
        .account.ablay .account-value { color: #4CAF50; }
        .account.koolo .account-value { color: #2196F3; }
        .account.depot .account-value { color: #FF9800; }
        .account.guest .account-value { color: #9C27B0; }
        
        .game-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .game-panel {
            background: rgba(20, 20, 40, 0.8);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }
        
        .panel-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .panel-title {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .ablay-panel .panel-title { color: #4CAF50; }
        .koolo-panel .panel-title { color: #2196F3; }
        
        .panel-content {
            margin-top: 20px;
        }
        
        textarea {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 1.1rem;
            resize: vertical;
            margin-bottom: 15px;
        }
        
        textarea:focus {
            outline: 2px solid #ffd700;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 10px;
            width: 100%;
        }
        
        .btn-primary { background: linear-gradient(to right, #4CAF50, #2E7D32); color: white; }
        .btn-secondary { background: linear-gradient(to right, #2196F3, #0D47A1); color: white; }
        .btn-tertiary { background: linear-gradient(to right, #9C27B0, #6A1B9A); color: white; }
        .btn-warning { background: linear-gradient(to right, #FF9800, #EF6C00); color: white; }
        
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn:active:not(:disabled) { transform: translateY(1px); }
        
        .btn-mode {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-mode.active {
            background: linear-gradient(to right, #ffd700, #ff9800);
            color: black;
            font-weight: bold;
        }
        
        .actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .transaction-log {
            background: rgba(20, 20, 40, 0.8);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            max-height: 300px;
            overflow-y: auto;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }
        
        .log-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #ffd700;
        }
        
        .log-entry {
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 15px;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .log-entry.ablay { border-left: 4px solid #4CAF50; }
        .log-entry.koolo { border-left: 4px solid #2196F3; }
        .log-entry.guest { border-left: 4px solid #9C27B0; }
        .log-entry.system { border-left: 4px solid #ffd700; }
        
        .log-icon { font-size: 1.5rem; }
        .log-content { flex: 1; }
        .log-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
            color: #aaa;
        }
        
        .guest-section {
            background: rgba(20, 20, 40, 0.8);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            margin-bottom: 20px;
        }
        
        .guest-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            color: #9C27B0;
        }
        
        .guest-input {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .guest-input input {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 1.1rem;
        }
        
        .guests-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .guest-card {
            background: rgba(50, 30, 60, 0.8);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .guest-name { font-weight: 600; }
        .guest-amount { margin-left: auto; font-weight: 700; color: #9C27B0; }
        
        .transfer-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }
        
        .money-transfer {
            background: rgba(30, 30, 50, 0.95);
            padding: 50px;
            border-radius: 20px;
            text-align: center;
            border: 3px solid #ffd700;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.5);
        }
        
        .money-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            color: #ffd700;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .transfer-text {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: white;
        }
        
        .transfer-amount {
            font-size: 3.5rem;
            font-weight: 800;
            color: #4CAF50;
            text-shadow: 0 0 20px rgba(76, 175, 80, 0.7);
        }
        
        .negative {
            color: #F44336;
            text-shadow: 0 0 20px rgba(244, 67, 54, 0.7);
        }
        
        .status-bar {
            display: flex;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 15px 25px;
            margin-top: 30px;
            font-size: 1.1rem;
        }
        
        .turn-indicator {
            background: #ffd700;
            color: #000;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 700;
            animation: pulse 2s infinite;
        }
        
        .media-player {
            width: 100%;
            margin-top: 15px;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .recording-indicator {
            display: none;
            color: #ff0000;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .recording-indicator .dot {
            display: inline-block;
            width: 10px;
            height: 10px;
            background-color: #ff0000;
            border-radius: 50%;
            margin-right: 5px;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0; }
            100% { opacity: 1; }
        }
        
        .mode-section {
            display: none;
        }
        
        .mode-section.active {
            display: block;
        }
        
        @media (max-width: 900px) {
            .game-container { grid-template-columns: 1fr; }
            .accounts-container { grid-template-columns: 1fr; }
            .actions { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-coins"></i> Jeu de Partage</h1>
            <p class="subtitle">Ablay, Koolo et Invit√©s - Partagez le d√©p√¥t de 50 000 selon vos performances</p>
        </header>
        
        <div class="accounts-container">
            <div class="account ablay" id="ablay-account">
                <div class="account-title">
                    <i class="fas fa-crown"></i>
                    <span>Ablay</span>
                </div>
                <div class="account-value" id="ablay-amount">0 mille</div>
                <div>Solde: <span id="ablay-balance">0</span> mille</div>
            </div>
            
            <div class="account depot">
                <div class="account-title">
                    <i class="fas fa-piggy-bank"></i>
                    <span>D√©p√¥t</span>
                </div>
                <div class="account-value" id="depot-amount">50 mille</div>
                <div>Total: <span id="depot-balance">50</span> mille</div>
            </div>
            
            <div class="account koolo" id="koolo-account">
                <div class="account-title">
                    <i class="fas fa-bullseye"></i>
                    <span>Koolo</span>
                </div>
                <div class="account-value" id="koolo-amount">0 mille</div>
                <div>Solde: <span id="koolo-balance">0</span> mille</div>
            </div>
            
            <div class="account guest" id="guest-account" style="display: none;">
                <div class="account-title">
                    <i class="fas fa-user-friends"></i>
                    <span id="guest-account-title">Invit√©s</span>
                </div>
                <div class="account-value" id="guest-amount">0 mille</div>
                <div>Total: <span id="guest-balance">0</span> mille</div>
            </div>
        </div>
        
        <div class="guest-section">
            <div class="guest-header">
                <i class="fas fa-user-plus fa-2x"></i>
                <h2>Ajouter un invit√©</h2>
            </div>
            <div class="guest-input">
                <input type="text" id="guest-name" placeholder="Nom de l'invit√©">
                <button class="btn btn-tertiary" id="add-guest-btn">
                    <i class="fas fa-plus"></i> Ajouter invit√©
                </button>
            </div>
            <p>Les invit√©s peuvent participer aux questions et gagner de l'argent !</p>
            <div class="guests-container" id="guests-list"></div>
        </div>
        
        <div class="game-container">
            <div class="game-panel ablay-panel">
                <div class="panel-header">
                    <i class="fas fa-user-circle fa-2x"></i>
                    <h2 class="panel-title" id="asker-title">Poseur de question</h2>
                </div>
                <div class="panel-content">
                    <div class="mode-selector">
                        <button class="btn-mode active" data-mode="text" data-type="question">Texte</button>
                        <button class="btn-mode" data-mode="audio" data-type="question">Audio</button>
                        <button class="btn-mode" data-mode="video" data-type="question">Vid√©o</button>
                    </div>
                    
                    <div id="text-question-section" class="mode-section active">
                        <textarea id="ablay-question" placeholder="√âcris ta question ici..."></textarea>
                    </div>
                    
                    <div id="audio-question-section" class="mode-section">
                        <button class="btn btn-primary" id="record-audio-btn">
                            <i class="fas fa-microphone"></i> <span id="audio-btn-text">Enregistrer une question audio</span>
                        </button>
                        <div class="recording-indicator" id="audio-recording-indicator">
                            <span class="dot"></span> Enregistrement en cours...
                        </div>
                        <audio id="audio-preview" controls class="media-preview"></audio>
                    </div>
                    
                    <div id="video-question-section" class="mode-section">
                        <button class="btn btn-primary" id="record-video-btn">
                            <i class="fas fa-video"></i> <span id="video-btn-text">Enregistrer une question vid√©o</span>
                        </button>
                        <div class="recording-indicator" id="video-recording-indicator">
                            <span class="dot"></span> Enregistrement en cours...
                        </div>
                        <video id="video-preview" controls class="media-preview"></video>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <label for="receiver-select">Destinataire :</label>
                        <select id="receiver-select" style="width: 100%; padding: 10px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: none; margin-top: 10px;">
                            <option value="koolo">Koolo</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-primary" id="ask-btn">
                        <i class="fas fa-paper-plane"></i> Envoyer la question
                    </button>
                </div>
            </div>
            
            <div class="game-panel koolo-panel">
                <div class="panel-header">
                    <i class="fas fa-user-circle fa-2x"></i>
                    <h2 class="panel-title" id="responder-title">R√©pondant</h2>
                </div>
                <div class="panel-content">
                    <div id="question-display" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; margin-bottom: 20px; display: none;">
                        <strong>Question en cours :</strong> 
                        <div id="current-question"></div>
                    </div>
                    
                    <div class="mode-selector">
                        <button class="btn-mode active" data-mode="text" data-type="response">Texte</button>
                        <button class="btn-mode" data-mode="audio" data-type="response">Audio</button>
                        <button class="btn-mode" data-mode="video" data-type="response">Vid√©o</button>
                    </div>
                    
                    <div id="text-response-section" class="mode-section active">
                        <textarea id="response-answer" placeholder="√âcris ta r√©ponse ici..." disabled></textarea>
                    </div>
                    
                    <div id="audio-response-section" class="mode-section">
                        <button class="btn btn-secondary" id="record-response-audio-btn" disabled>
                            <i class="fas fa-microphone"></i> <span id="response-audio-btn-text">Enregistrer une r√©ponse audio</span>
                        </button>
                        <div class="recording-indicator" id="response-audio-recording-indicator">
                            <span class="dot"></span> Enregistrement en cours...
                        </div>
                        <audio id="response-audio-preview" controls class="media-player"></audio>
                    </div>
                    
                    <div id="video-response-section" class="mode-section">
                        <button class="btn btn-secondary" id="record-response-video-btn" disabled>
                            <i class="fas fa-video"></i> <span id="response-video-btn-text">Enregistrer une r√©ponse vid√©o</span>
                        </button>
                        <div class="recording-indicator" id="response-video-recording-indicator">
                            <span class="dot"></span> Enregistrement en cours...
                        </div>
                        <video id="response-video-preview" controls class="media-player"></video>
                    </div>
                    
                    <button class="btn btn-secondary" id="send-response-btn" disabled>
                        <i class="fas fa-share"></i> Envoyer la r√©ponse
                    </button>
                </div>
            </div>
        </div>
        
        <div class="game-panel">
            <div class="panel-header">
                <i class="fas fa-check-circle fa-2x"></i>
                <h2 class="panel-title">Validation</h2>
            </div>
            <div class="panel-content">
                <div id="response-display" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; margin-bottom: 20px; display: none;">
                    <strong>R√©ponse re√ßue :</strong> 
                    <div id="current-response"></div>
                </div>
                
                <div class="actions">
                    <button class="btn btn-primary" id="correct-btn" disabled>
                        <i class="fas fa-check-circle"></i> Bonne r√©ponse
                    </button>
                    <button class="btn btn-warning" id="wrong-btn" disabled>
                        <i class="fas fa-times-circle"></i> Mauvaise r√©ponse
                    </button>
                    <button class="btn" id="refuse-btn" style="background: linear-gradient(to right, #607D8B, #37474F);" disabled>
                        <i class="fas fa-ban"></i> Refuser la r√©ponse
                    </button>
                </div>
            </div>
        </div>
        
        <div class="transaction-log">
            <div class="log-title">
                <i class="fas fa-clipboard-list"></i>
                <h2>Journal des transactions</h2>
            </div>
            <div id="log-entries">
                <div class="log-entry system">
                    <div class="log-icon"><i class="fas fa-info-circle"></i></div>
                    <div class="log-content">
                        <div class="log-header">
                            <span>Syst√®me</span>
                            <span>Maintenant</span>
                        </div>
                        <div>Bienvenue au jeu de partage ! D√©p√¥t initial de 50 000 mille. Ablay doit poser une question.</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="status-bar">
            <div><strong>Statut :</strong> <span id="game-status">En attente d'une question</span></div>
            <div><strong>Tour actuel :</strong> <span class="turn-indicator" id="turn-indicator">Ablay</span></div>
        </div>
    </div>
    
    <div class="transfer-animation" id="transfer-animation" style="display: none;">
        <div class="money-transfer">
            <div class="money-icon"><i class="fas fa-coins"></i></div>
            <div class="transfer-text">Transfert d'argent</div>
            <div class="transfer-amount" id="transfer-amount">+10 000</div>
        </div>
    </div>

    <script>
        // √âtat du jeu
        const gameState = {
            depot: 50000,
            ablay: 0,
            koolo: 0,
            guests: [],
            currentQuestion: null,
            currentResponse: null,
            turn: 'ask',
            transactions: 0,
            currentAsker: 'ablay',
            currentResponder: null,
            currentMode: 'text',
            responseMode: 'text',
            players: ['ablay', 'koolo'],
            currentPlayerIndex: 0,
            mediaRecorder: null,
            recordedChunks: []
        };

        // √âl√©ments DOM
        const DOM = {
            ablayAmount: document.getElementById('ablay-amount'),
            kooloAmount: document.getElementById('koolo-amount'),
            depotAmount: document.getElementById('depot-amount'),
            guestAmount: document.getElementById('guest-amount'),
            ablayAccount: document.getElementById('ablay-account'),
            kooloAccount: document.getElementById('koolo-account'),
            guestAccount: document.getElementById('guest-account'),
            askBtn: document.getElementById('ask-btn'),
            correctBtn: document.getElementById('correct-btn'),
            wrongBtn: document.getElementById('wrong-btn'),
            refuseBtn: document.getElementById('refuse-btn'),
            questionDisplay: document.getElementById('question-display'),
            currentQuestion: document.getElementById('current-question'),
            responseDisplay: document.getElementById('response-display'),
            currentResponse: document.getElementById('current-response'),
            logEntries: document.getElementById('log-entries'),
            turnIndicator: document.getElementById('turn-indicator'),
            gameStatus: document.getElementById('game-status'),
            transferAnimation: document.getElementById('transfer-animation'),
            transferAmount: document.getElementById('transfer-amount'),
            receiverSelect: document.getElementById('receiver-select'),
            askerTitle: document.getElementById('asker-title'),
            responderTitle: document.getElementById('responder-title'),
            responseAnswer: document.getElementById('response-answer'),
            guestsList: document.getElementById('guests-list'),
            guestAccountTitle: document.getElementById('guest-account-title'),
            sendResponseBtn: document.getElementById('send-response-btn'),
            addGuestBtn: document.getElementById('add-guest-btn'),
            recordAudioBtn: document.getElementById('record-audio-btn'),
            recordVideoBtn: document.getElementById('record-video-btn'),
            audioPreview: document.getElementById('audio-preview'),
            videoPreview: document.getElementById('video-preview'),
            recordResponseAudioBtn: document.getElementById('record-response-audio-btn'),
            recordResponseVideoBtn: document.getElementById('record-response-video-btn'),
            responseAudioPreview: document.getElementById('response-audio-preview'),
            responseVideoPreview: document.getElementById('response-video-preview'),
            audioRecordingIndicator: document.getElementById('audio-recording-indicator'),
            videoRecordingIndicator: document.getElementById('video-recording-indicator'),
            responseAudioRecordingIndicator: document.getElementById('response-audio-recording-indicator'),
            responseVideoRecordingIndicator: document.getElementById('response-video-recording-indicator'),
            audioBtnText: document.getElementById('audio-btn-text'),
            videoBtnText: document.getElementById('video-btn-text'),
            responseAudioBtnText: document.getElementById('response-audio-btn-text'),
            responseVideoBtnText: document.getElementById('response-video-btn-text')
        };

        // Initialisation du jeu
        function initGame() {
            updateUI();
            setupEventListeners();
            updatePlayerTurn();
            checkMediaPermissions();
        }

        // V√©rifier les permissions pour l'audio et la vid√©o
        async function checkMediaPermissions() {
            try {
                await navigator.mediaDevices.getUserMedia({ audio: true, video: true });
            } catch (err) {
                addLog('system', 'Permissions audio/vid√©o refus√©es. Certaines fonctionnalit√©s seront limit√©es.');
                DOM.recordAudioBtn.disabled = true;
                DOM.recordVideoBtn.disabled = true;
                DOM.recordResponseAudioBtn.disabled = true;
                DOM.recordResponseVideoBtn.disabled = true;
            }
        }

        // Configuration des √©couteurs d'√©v√©nements
        function setupEventListeners() {
            DOM.askBtn.addEventListener('click', askQuestion);
            DOM.correctBtn.addEventListener('click', () => validateAnswer('correct'));
            DOM.wrongBtn.addEventListener('click', () => validateAnswer('wrong'));
            DOM.refuseBtn.addEventListener('click', () => validateAnswer('refuse'));
            DOM.addGuestBtn.addEventListener('click', addGuest);
            DOM.sendResponseBtn.addEventListener('click', sendResponse);

            DOM.transferAnimation.addEventListener('click', () => {
                DOM.transferAnimation.style.display = 'none';
            });

            document.querySelectorAll('.btn-mode').forEach(btn => {
                btn.addEventListener('click', function() {
                    const mode = this.dataset.mode;
                    const type = this.dataset.type;
                    selectMode(mode, type);
                });
            });

            let isRecording = false;
            DOM.recordAudioBtn.addEventListener('click', () => toggleRecording('audio', DOM.audioPreview, DOM.audioRecordingIndicator, DOM.audioBtnText));
            DOM.recordVideoBtn.addEventListener('click', () => toggleRecording('video', DOM.videoPreview, DOM.videoRecordingIndicator, DOM.videoBtnText));
            DOM.recordResponseAudioBtn.addEventListener('click', () => toggleRecording('response-audio', DOM.responseAudioPreview, DOM.responseAudioRecordingIndicator, DOM.responseAudioBtnText));
            DOM.recordResponseVideoBtn.addEventListener('click', () => toggleRecording('response-video', DOM.responseVideoPreview, DOM.responseVideoRecordingIndicator, DOM.responseVideoBtnText));
        }

        // Gestion de l'enregistrement audio/vid√©o
        async function toggleRecording(type, previewElement, indicatorElement, btnTextElement) {
            if (!gameState.mediaRecorder || gameState.mediaRecorder.state === 'inactive') {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia(
                        type.includes('audio') ? { audio: true } : { video: true, audio: true }
                    );
                    gameState.mediaRecorder = new MediaRecorder(stream);
                    gameState.recordedChunks = [];

                    gameState.mediaRecorder.ondataavailable = (event) => {
                        if (event.data.size > 0) {
                            gameState.recordedChunks.push(event.data);
                        }
                    };

                    gameState.mediaRecorder.onstop = () => {
                        const blob = new Blob(gameState.recordedChunks, {
                            type: type.includes('audio') ? 'audio/webm' : 'video/webm'
                        });
                        previewElement.src = URL.createObjectURL(blob);
                        previewElement.style.display = 'block';
                        indicatorElement.style.display = 'none';
                        btnTextElement.textContent = type.includes('response') ? 
                            (type.includes('audio') ? 'R√©enregistrer la r√©ponse audio' : 'R√©enregistrer la r√©ponse vid√©o') :
                            (type.includes('audio') ? 'R√©enregistrer la question audio' : 'R√©enregistrer la question vid√©o');
                        addLog('system', `${type.includes('response') ? 'R√©ponse' : 'Question'} ${type.includes('audio') ? 'audio' : 'vid√©o'} enregistr√©e`);
                        stream.getTracks().forEach(track => track.stop());
                    };

                    gameState.mediaRecorder.start();
                    indicatorElement.style.display = 'block';
                    btnTextElement.textContent = 'Arr√™ter l\'enregistrement';
                } catch (err) {
                    addLog('system', `Erreur lors de l'enregistrement ${type.includes('audio') ? 'audio' : 'vid√©o'}: ${err.message}`);
                }
            } else {
                gameState.mediaRecorder.stop();
            }
        }

        // Mettre √† jour l'interface
        function updateUI() {
            DOM.ablayAmount.textContent = `${(gameState.ablay / 1000)} mille`;
            DOM.kooloAmount.textContent = `${(gameState.koolo / 1000)} mille`;
            DOM.depotAmount.textContent = `${(gameState.depot / 1000)} mille`;
            document.getElementById('ablay-balance').textContent = gameState.ablay / 1000;
            document.getElementById('koolo-balance').textContent = gameState.koolo / 1000;
            document.getElementById('depot-balance').textContent = gameState.depot / 1000;

            updateGuestAccount();
            DOM.turnIndicator.textContent = capitalize(gameState.players[gameState.currentPlayerIndex]);
            DOM.askerTitle.textContent = `${capitalize(gameState.currentAsker)} - Pose la question`;

            const isAskerTurn = gameState.turn === 'ask';
            const isResponderTurn = gameState.turn === 'respond';
            const isValidationTurn = gameState.turn === 'validate';

            document.getElementById('ablay-question').disabled = !isAskerTurn;
            DOM.askBtn.disabled = !isAskerTurn;
            DOM.recordAudioBtn.disabled = !isAskerTurn;
            DOM.recordVideoBtn.disabled = !isAskerTurn;
            DOM.responseAnswer.disabled = !isResponderTurn;
            DOM.sendResponseBtn.disabled = !isResponderTurn;
            DOM.recordResponseAudioBtn.disabled = !isResponderTurn;
            DOM.recordResponseVideoBtn.disabled = !isResponderTurn;
            DOM.correctBtn.disabled = !isValidationTurn;
            DOM.wrongBtn.disabled = !isValidationTurn;
            DOM.refuseBtn.disabled = !isValidationTurn;

            DOM.gameStatus.textContent = isAskerTurn ? 
                `En attente d'une question de ${capitalize(gameState.currentAsker)}` :
                isResponderTurn ? 
                `${capitalize(gameState.currentResponder)} doit r√©pondre √† la question` :
                "En attente de validation de la r√©ponse";

            updateGuestsList();
        }

        // Mettre √† jour le compte invit√©
        function updateGuestAccount() {
            const totalGuestAmount = gameState.guests.reduce((sum, guest) => sum + guest.amount, 0);
            DOM.guestAmount.textContent = `${(totalGuestAmount / 1000)} mille`;
            document.getElementById('guest-balance').textContent = totalGuestAmount / 1000;

            if (gameState.guests.length > 0) {
                DOM.guestAccount.style.display = 'block';
                DOM.guestAccountTitle.textContent = gameState.guests.length > 1 ? 
                    `${gameState.guests.length} Invit√©s` : '1 Invit√©';
            } else {
                DOM.guestAccount.style.display = 'none';
            }
        }

        // Mettre √† jour la liste des invit√©s
        function updateGuestsList() {
            DOM.guestsList.innerHTML = '';
            gameState.guests.forEach(guest => {
                const guestCard = document.createElement('div');
                guestCard.className = 'guest-card';
                guestCard.innerHTML = `
                    <i class="fas fa-user"></i>
                    <span class="guest-name">${guest.name}</span>
                    <span class="guest-amount">${guest.amount / 1000} mille</span>
                `;
                DOM.guestsList.appendChild(guestCard);
            });
            updateReceiverOptions();
        }

        // Mettre √† jour les options du destinataire
        function updateReceiverOptions() {
            const currentReceiver = DOM.receiverSelect.value;
            DOM.receiverSelect.innerHTML = '<option value="koolo">Koolo</option>';
            gameState.guests.forEach(guest => {
                const option = document.createElement('option');
                option.value = guest.id;
                option.textContent = guest.name;
                DOM.receiverSelect.appendChild(option);
            });
            if (gameState.guests.some(guest => guest.id === currentReceiver)) {
                DOM.receiverSelect.value = currentReceiver;
            }
        }

        // S√©lectionner un mode
        function selectMode(mode, type) {
            if (type === 'question') {
                gameState.currentMode = mode;
            } else {
                gameState.responseMode = mode;
            }

            document.querySelectorAll(`.btn-mode[data-type="${type}"]`).forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.mode === mode) {
                    btn.classList.add('active');
                }
            });

            document.querySelectorAll(`.mode-section`).forEach(section => {
                section.classList.remove('active');
            });

            document.getElementById(`${mode}-${type}-section`).classList.add('active');
        }

        // Mettre √† jour le tour
        function updatePlayerTurn() {
            gameState.currentAsker = gameState.players[gameState.currentPlayerIndex];
            gameState.turn = 'ask';
            updateUI();
        }

        // Poser une question
        function askQuestion() {
            let question;
            if (gameState.currentMode === 'text') {
                question = document.getElementById('ablay-question').value.trim();
                if (!question) {
                    addLog('system', 'Veuillez √©crire une question !');
                    return;
                }
            } else if (gameState.currentMode === 'audio') {
                if (!DOM.audioPreview.src) {
                    addLog('system', 'Veuillez enregistrer un audio !');
                    return;
                }
                question = "Question audio";
            } else {
                if (!DOM.videoPreview.src) {
                    addLog('system', 'Veuillez enregistrer une vid√©o !');
                    return;
                }
                question = "Question vid√©o";
            }

            const receiver = DOM.receiverSelect.value;
            gameState.currentQuestion = {
                text: question,
                mode: gameState.currentMode,
                asker: gameState.currentAsker,
                media: gameState.currentMode !== 'text' ? (gameState.currentMode === 'audio' ? DOM.audioPreview.src : DOM.videoPreview.src) : null
            };

            gameState.currentResponder = receiver === 'koolo' ? 'koolo' : 
                gameState.guests.find(g => g.id === receiver)?.name || 'Inconnu';
            gameState.turn = 'respond';

            DOM.questionDisplay.style.display = 'block';
            if (gameState.currentMode === 'text') {
                DOM.currentQuestion.innerHTML = `
                    <div><strong>De:</strong> ${capitalize(gameState.currentAsker)}</div>
                    <div><strong>Mode:</strong> Texte</div>
                    <div>${question}</div>
                `;
            } else if (gameState.currentMode === 'audio') {
                DOM.currentQuestion.innerHTML = `
                    <div><strong>De:</strong> ${capitalize(gameState.currentAsker)}</div>
                    <div><strong>Mode:</strong> Audio</div>
                    <audio src="${DOM.audioPreview.src}" controls></audio>
                `;
            } else {
                DOM.currentQuestion.innerHTML = `
                    <div><strong>De:</strong> ${capitalize(gameState.currentAsker)}</div>
                    <div><strong>Mode:</strong> Vid√©o</div>
                    <video src="${DOM.videoPreview.src}" controls width="100%"></video>
                `;
            }

            addLog(gameState.currentAsker, `A pos√© une question √† ${gameState.currentResponder}`);
            document.getElementById('ablay-question').value = '';
            DOM.audioPreview.src = '';
            DOM.videoPreview.src = '';
            DOM.audioPreview.style.display = 'none';
            DOM.videoPreview.style.display = 'none';
            DOM.responderTitle.textContent = `${capitalize(gameState.currentResponder)} - R√©pond √† la question`;
            updateUI();
        }

        // Envoyer la r√©ponse
        function sendResponse() {
            let response;
            if (gameState.responseMode === 'text') {
                response = DOM.responseAnswer.value.trim();
                if (!response) {
                    addLog('system', 'Veuillez √©crire une r√©ponse !');
                    return;
                }
            } else if (gameState.responseMode === 'audio') {
                if (!DOM.responseAudioPreview.src) {
                    addLog('system', 'Veuillez enregistrer un audio !');
                    return;
                }
                response = "R√©ponse audio";
            } else {
                if (!DOM.responseVideoPreview.src) {
                    addLog('system', 'Veuillez enregistrer une vid√©o !');
                    return;
                }
                response = "R√©ponse vid√©o";
            }

            gameState.currentResponse = {
                text: response,
                mode: gameState.responseMode,
                responder: gameState.currentResponder,
                media: gameState.responseMode !== 'text' ? (gameState.responseMode === 'audio' ? DOM.responseAudioPreview.src : DOM.responseVideoPreview.src) : null
            };

            gameState.turn = 'validate';
            DOM.responseDisplay.style.display = 'block';

            if (gameState.responseMode === 'text') {
                DOM.currentResponse.innerHTML = `
                    <div><strong>De:</strong> ${capitalize(gameState.currentResponder)}</div>
                    <div><strong>Mode:</strong> Texte</div>
                    <div>${response}</div>
                `;
            } else if (gameState.responseMode === 'audio') {
                DOM.currentResponse.innerHTML = `
                    <div><strong>De:</strong> ${capitalize(gameState.currentResponder)}</div>
                    <div><strong>Mode:</strong> Audio</div>
                    <audio src="${DOM.responseAudioPreview.src}" controls></audio>
                `;
            } else {
                DOM.currentResponse.innerHTML = `
                    <div><strong>De:</strong> ${capitalize(gameState.currentResponder)}</div>
                    <div><strong>Mode:</strong> Vid√©o</div>
                    <video src="${DOM.responseVideoPreview.src}" controls width="100%"></video>
                `;
            }

            addLog(gameState.currentResponder, `A r√©pondu √† la question`);
            DOM.responseAnswer.value = '';
            DOM.responseAudioPreview.src = '';
            DOM.responseVideoPreview.src = '';
            DOM.responseAudioPreview.style.display = 'none';
            DOM.responseVideoPreview.style.display = 'none';
            updateUI();
        }

        // Valider la r√©ponse
        function validateAnswer(type) {
            let message = '';
            let amount = 0;
            const isGuest = !['ablay', 'koolo'].includes(gameState.currentResponder);
            const responder = isGuest ? gameState.guests.find(g => g.name === gameState.currentResponder) : null;

            switch (type) {
                case 'correct':
                    amount = 10000;
                    if (gameState.depot >= amount) {
                        if (isGuest && responder) {
                            responder.amount += amount;
                        } else if (gameState.currentResponder === 'ablay') {
                            gameState.ablay += amount;
                        } else {
                            gameState.koolo += amount;
                        }
                        gameState.depot -= amount;
                        message = `Bonne r√©ponse ! ${capitalize(gameState.currentResponder)} gagne ${amount/1000} mille`;
                        showTransferAnimation(`+${amount/1000} mille`, 'positive');
                    } else {
                        message = 'Bonne r√©ponse mais le d√©p√¥t est vide !';
                    }
                    break;

                case 'wrong':
                    amount = 5000;
                    if ((isGuest && responder && responder.amount >= amount) || 
                        (gameState.currentResponder === 'ablay' && gameState.ablay >= amount) || 
                        (gameState.currentResponder === 'koolo' && gameState.koolo >= amount)) {
                        if (isGuest && responder) {
                            responder.amount -= amount;
                        } else if (gameState.currentResponder === 'ablay') {
                            gameState.ablay -= amount;
                        } else {
                            gameState.koolo -= amount;
                        }
                        gameState.depot += amount;
                        message = `Mauvaise r√©ponse ! ${capitalize(gameState.currentResponder)} perd ${amount/1000} mille`;
                        showTransferAnimation(`-${amount/1000} mille`, 'negative');
                    } else {
                        message = `${capitalize(gameState.currentResponder)} n'a pas assez d'argent !`;
                    }
                    break;

                case 'refuse':
                    amount = 20000;
                    if ((isGuest && responder && responder.amount >= amount) || 
                        (gameState.currentResponder === 'ablay' && gameState.ablay >= amount) || 
                        (gameState.currentResponder === 'koolo' && gameState.koolo >= amount)) {
                        if (isGuest && responder) {
                            responder.amount -= amount;
                        } else if (gameState.currentResponder === 'ablay') {
                            gameState.ablay -= amount;
                        } else {
                            gameState.koolo -= amount;
                        }
                        gameState.depot += amount;
                        message = `${capitalize(gameState.currentResponder)} a refus√© de r√©pondre ! Perte de ${amount/1000} mille`;
                        showTransferAnimation(`-${amount/1000} mille`, 'negative');
                    } else {
                        message = `${capitalize(gameState.currentResponder)} n'a pas assez d'argent pour refuser !`;
                    }
                    break;
            }

            addLog('system', message);
            gameState.currentPlayerIndex = (gameState.currentPlayerIndex + 1) % gameState.players.length;
            updatePlayerTurn();
            DOM.questionDisplay.style.display = 'none';
            DOM.responseDisplay.style.display = 'none';
            updateUI();
        }

        // Ajouter un message au journal
        function addLog(sender, message) {
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            const senderName = sender === 'system' ? 'Syst√®me' : capitalize(sender);

            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${sender}`;
            logEntry.innerHTML = `
                <div class="log-icon">
                    ${sender === 'ablay' ? '<i class="fas fa-crown"></i>' : 
                     sender === 'koolo' ? '<i class="fas fa-bullseye"></i>' : 
                     sender === 'system' ? '<i class="fas fa-info-circle"></i>' : 
                     '<i class="fas fa-user"></i>'}
                </div>
                <div class="log-content">
                    <div class="log-header">
                        <span>${senderName}</span>
                        <span>${timeString}</span>
                    </div>
                    <div>${message}</div>
                </div>
            `;
            DOM.logEntries.prepend(logEntry);
        }

        // Afficher l'animation de transfert
        function showTransferAnimation(amount, type) {
            DOM.transferAmount.textContent = amount;
            DOM.transferAmount.className = `transfer-amount ${type === 'negative' ? 'negative' : ''}`;
            DOM.transferAnimation.style.display = 'flex';
            setTimeout(() => {
                DOM.transferAnimation.style.display = 'none';
            }, 2000);
        }

        // Ajouter un invit√©
        function addGuest() {
            const guestName = document.getElementById('guest-name').value.trim();
            if (!guestName) {
                addLog('system', 'Veuillez entrer un nom pour l\'invit√© !');
                return;
            }

            if (gameState.guests.some(g => g.name.toLowerCase() === guestName.toLowerCase())) {
                addLog('system', 'Cet invit√© participe d√©j√† au jeu !');
                return;
            }

            const newGuest = {
                id: 'guest' + Date.now(),
                name: guestName,
                amount: 0
            };

            gameState.guests.push(newGuest);
            gameState.players.push(newGuest.id);
            addLog('system', `Un invit√© a rejoint le jeu : ${guestName}`);
            document.getElementById('guest-name').value = '';
            updateUI();
        }

        // Capitaliser la premi√®re lettre
        function capitalize(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        // D√©marrer le jeu
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>



                
               
    <script>
        // Section 1: Responses System
        // Charger les r√©ponses depuis le localStorage
        let responses = JSON.parse(localStorage.getItem('responses')) || [];
        
        const form = document.getElementById('responseForm');
        const textInput = document.getElementById('textResponse');
        const mediaInput = document.getElementById('mediaInput');
        const userNameInput = document.getElementById('userName');
        const responsesContainer = document.getElementById('responsesContainer');
        const noResponsesMessage = document.getElementById('noResponsesMessage');
        const clearResponsesBtn = document.getElementById('clearResponses');
        const confirmationMessage = document.getElementById('confirmationMessage');
        
        // Afficher les r√©ponses au chargement de la page
        renderResponses();
        
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const userName = userNameInput.value.trim() || "Anonyme";
            const textValue = textInput.value.trim();
            const file = mediaInput.files[0];
            
            if (!textValue && !file) {
                showMessage('Merci d\'√©crire un message ou choisir un fichier avant d\'envoyer.', 'error');
                return;
            }
            
            if (file) {
                const type = file.type.split('/')[0]; // image, audio, video
                const reader = new FileReader();
                
                reader.onload = function(event) {
                    addResponse(userName, type, event.target.result, textValue);
                };
                
                reader.readAsDataURL(file);
            } else {
                addResponse(userName, 'text', textValue);
            }
        });
        
        function addResponse(userName, type, content, textContent = '') {
            const now = new Date();
            const response = {
                id: Date.now(),
                userName,
                type,
                content,
                textContent,
                timestamp: now.toLocaleString()
            };
            
            responses.push(response);
            saveResponses();
            renderResponses();
            
            // Afficher la confirmation d'envoi
            confirmationMessage.textContent = 'Message envoy√© avec succ√®s !';
            confirmationMessage.style.display = 'block';
            setTimeout(() => {
                confirmationMessage.style.display = 'none';
            }, 3000);
            
            // Reset form
            userNameInput.value = '';
            textInput.value = '';
            mediaInput.value = '';
        }
        
        function saveResponses() {
            localStorage.setItem('responses', JSON.stringify(responses));
        }
        
        function renderResponses() {
            if (responses.length === 0) {
                responsesContainer.innerHTML = '<div class="no-responses" id="noResponsesMessage">Aucune r√©ponse pour le moment. Sois le premier √† r√©agir !</div>';
                return;
            }
            
            noResponsesMessage.style.display = 'none';
            
            // Trier les r√©ponses par date (les plus r√©centes en premier)
            responses.sort((a, b) => b.id - a.id);
            
            let html = '<h3>R√©ponses des visiteurs :</h3><div class="responses-grid">';
            
            responses.forEach(r => {
                html += `<div class="response-item">
                    <div class="response-header">
                        <span><strong>${escapeHtml(r.userName)}</strong></span>
                        <span>${r.timestamp}</span>
                    </div>`;
                
                if (r.textContent) {
                    html += `<div class="response-text">${escapeHtml(r.textContent)}</div>`;
                }
                
                if (r.type === 'image') {
                    html += `<div class="response-media"><img src="${r.content}" alt="Image envoy√©e" style="max-width:100%; border-radius:6px;"></div>`;
                } else if (r.type === 'audio') {
                    html += `<div class="response-media"><audio controls src="${r.content}" style="width:100%;"></audio></div>`;
                } else if (r.type === 'video') {
                    html += `<div class="response-media"><video controls src="${r.content}" style="width:100%; border-radius:6px;"></video></div>`;
                }
                
                html += `<button class="delete-btn" onclick="deleteResponse(${r.id})" title="Supprimer cette r√©ponse">√ó</button>`;
                html += '</div>';
            });
            
            html += '</div>';
            responsesContainer.innerHTML = html;
        }
        
        function deleteResponse(id) {
            if (confirm('Voulez-vous vraiment supprimer cette r√©ponse ?')) {
                responses = responses.filter(r => r.id !== id);
                saveResponses();
                renderResponses();
                confirmationMessage.textContent = 'R√©ponse supprim√©e avec succ√®s !';
                confirmationMessage.style.display = 'block';
                setTimeout(() => {
                    confirmationMessage.style.display = 'none';
                }, 3000);
            }
        }
        
        // √âviter les injections XSS
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        // Gestion du bouton d'effacement
        clearResponsesBtn.addEventListener('click', function() {
            if (confirm('Voulez-vous vraiment supprimer TOUTES les r√©ponses ? Cette action est irr√©versible.')) {
                responses = [];
                localStorage.removeItem('responses');
                renderResponses();
                confirmationMessage.textContent = 'Toutes les r√©ponses ont √©t√© supprim√©es !';
                confirmationMessage.style.display = 'block';
                setTimeout(() => {
                    confirmationMessage.style.display = 'none';
                }, 3000);
            }
        });

        // Fonction pour afficher les messages de confirmation
        function showMessage(message, type = 'success') {
            confirmationMessage.textContent = message;
            confirmationMessage.style.display = 'block';
            confirmationMessage.style.background = type === 'error' ? '#f44336' : '#4CAF50';
            
            // Cacher le message apr√®s 3 secondes
            setTimeout(() => {
                confirmationMessage.style.display = 'none';
            }, 3000);
        }

        // Initialisation
        window.addEventListener('DOMContentLoaded', function() {
            // Pr√©charger tous les m√©dias pour une lecture imm√©diate
            const mediaElements = document.querySelectorAll('audio, video');
            mediaElements.forEach(media => {
                media.preload = 'metadata';
            });
        });
        
        // Fonction pour naviguer vers les sections
        function scrollToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({
                behavior: 'smooth'
            });
        }
        
        // ======================================
        // SECTION DU JEU
        // ======================================
        
        // √âtat du jeu
        const gameState = {
            depot: 50000,
            ablay: 0,
            koolo: 0,
            guests: [],
            currentQuestion: null,
            currentResponses: {},
            pendingResponders: [],
            turn: 'ask',
            transactions: 0,
            currentAsker: 'ablay',
            players: ['ablay', 'koolo'],
            currentPlayerIndex: 0
        };
        
        // √âl√©ments DOM du jeu
        const DOMGame = {
            ablayAmount: document.getElementById('ablay-amount'),
            kooloAmount: document.getElementById('koolo-amount'),
            depotAmount: document.getElementById('depot-amount'),
            guestAmount: document.getElementById('guest-amount'),
            ablayAccount: document.getElementById('ablay-account'),
            kooloAccount: document.getElementById('koolo-account'),
            guestAccount: document.getElementById('guest-account'),
            askBtn: document.getElementById('ask-btn'),
            correctBtn: document.getElementById('correct-btn'),
            wrongBtn: document.getElementById('wrong-btn'),
            refuseBtn: document.getElementById('refuse-btn'),
            questionDisplay: document.getElementById('question-display'),
            currentQuestion: document.getElementById('current-question'),
            responseDisplay: document.getElementById('response-display'),
            logEntries: document.getElementById('log-entries'),
            turnIndicator: document.getElementById('turn-indicator'),
            gameStatus: document.getElementById('game-status'),
            transferAnimation: document.getElementById('transfer-animation'),
            transferAmount: document.getElementById('transfer-amount'),
            askerTitle: document.getElementById('asker-title'),
            responderTitle: document.getElementById('responder-title'),
            sendResponseBtn: document.getElementById('send-response-btn'),
            addGuestBtn: document.getElementById('add-guest-btn'),
            questionStatus: document.getElementById('questionStatus'),
            guestsList: document.getElementById('guests-list'),
            guestAccountTitle: document.getElementById('guest-account-title')
        };
        
        let currentRecorder;
        let currentStream;
        let chunks = [];
        
        // Initialisation du jeu
        function initGame() {
            updateUIGame();
            setupEventListenersGame();
            updatePlayerTurn();
            updateQuestionInput();
        }
        
        // Configuration des √©couteurs d'√©v√©nements du jeu
        function setupEventListenersGame() {
            DOMGame.askBtn.addEventListener('click', askQuestion);
            DOMGame.sendResponseBtn.addEventListener('click', sendResponse);
            DOMGame.addGuestBtn.addEventListener('click', addGuest);
            document.getElementById('question-type').addEventListener('change', updateQuestionInput);
            
            DOMGame.transferAnimation.addEventListener('click', () => {
                DOMGame.transferAnimation.style.display = 'none';
            });
        }
        
        // Mettre √† jour l'interface du jeu
        function updateUIGame() {
            DOMGame.ablayAmount.textContent = `${gameState.ablay / 1000} mille`;
            DOMGame.kooloAmount.textContent = `${gameState.koolo / 1000} mille`;
            DOMGame.depotAmount.textContent = `${gameState.depot / 1000} mille`;
            document.getElementById('ablay-balance').textContent = gameState.ablay / 1000;
            document.getElementById('koolo-balance').textContent = gameState.koolo / 1000;
            document.getElementById('depot-balance').textContent = gameState.depot / 1000;

            updateGuestAccount();
            DOMGame.turnIndicator.textContent = capitalize(getName(gameState.players[gameState.currentPlayerIndex]));
            DOMGame.askerTitle.textContent = `${capitalize(getName(gameState.currentAsker))} - Pose la question`;

            const isAskTurn = gameState.turn === 'ask';
            const isRespondTurn = gameState.turn === 'respond';
            const isValidateTurn = gameState.turn === 'validate';

            DOMGame.askBtn.disabled = !isAskTurn;
            DOMGame.sendResponseBtn.disabled = !isRespondTurn;
            DOMGame.correctBtn.disabled = true; // Managed per response
            DOMGame.wrongBtn.disabled = true;
            DOMGame.refuseBtn.disabled = true;

            DOMGame.gameStatus.textContent = isAskTurn ? 
                `En attente d'une question de ${capitalize(getName(gameState.currentAsker))}` :
                isRespondTurn ? 
                `Les r√©pondants doivent r√©pondre √† la question` :
                "En attente de validation des r√©ponses";

            if (isRespondTurn) {
                const pending = gameState.pendingResponders || [];
                const selectGroup = document.getElementById('responder-select-group');
                if (pending.length > 1) {
                    selectGroup.style.display = 'block';
                    const select = document.getElementById('responder-select');
                    select.innerHTML = pending.map(p => `<option value="${p}">${capitalize(getName(p))}</option>`).join('');
                } else {
                    selectGroup.style.display = 'none';
                }
                updateResponseInput(gameState.currentQuestion ? gameState.currentQuestion.type : 'text');
                displayQuestion();
            } else if (isValidateTurn) {
                displayResponses();
            }

            document.querySelectorAll('.account').forEach(a => a.classList.remove('active'));
            const askerAccountId = `${gameState.currentAsker}-account`;
            const askerAccount = document.getElementById(askerAccountId);
            if (askerAccount) askerAccount.classList.add('active');

            updateGuestsList();
        }
        
        // Mettre √† jour le compte invit√©
        function updateGuestAccount() {
            const totalGuestAmount = gameState.guests.reduce((sum, guest) => sum + guest.amount, 0);
            DOMGame.guestAmount.textContent = `${totalGuestAmount / 1000} mille`;
            document.getElementById('guest-balance').textContent = totalGuestAmount / 1000;

            if (gameState.guests.length > 0) {
                DOMGame.guestAccount.style.display = 'block';
                DOMGame.guestAccountTitle.textContent = gameState.guests.length > 1 ? 
                    `${gameState.guests.length} Invit√©s` : '1 Invit√©';
            } else {
                DOMGame.guestAccount.style.display = 'none';
            }
        }
        
        // Mettre √† jour la liste des invit√©s
        function updateGuestsList() {
            DOMGame.guestsList.innerHTML = '';
            gameState.guests.forEach(guest => {
                const guestCard = document.createElement('div');
                guestCard.className = 'guest-card';
                guestCard.innerHTML = `
                    <i class="fas fa-user"></i>
                    <span class="guest-name">${guest.name}</span>
                    <span class="guest-amount">${guest.amount / 1000} mille</span>
                `;
                DOMGame.guestsList.appendChild(guestCard);
            });
        }
        
        // Mettre √† jour le tour du joueur
        function updatePlayerTurn() {
            gameState.currentAsker = gameState.players[gameState.currentPlayerIndex];
            gameState.turn = 'ask';
            gameState.currentQuestion = null;
            gameState.currentResponses = {};
            gameState.pendingResponders = [];
            DOMGame.questionDisplay.style.display = 'none';
            DOMGame.responseDisplay.style.display = 'none';
            DOMGame.questionStatus.style.display = 'none';
            updateUIGame();
        }
        
        // Mettre √† jour l'input de question
        function updateQuestionInput() {
            const type = document.getElementById('question-type').value;
            const container = document.getElementById('question-input');
            container.innerHTML = '';
            if (type === 'text') {
                const ta = document.createElement('textarea');
                ta.id = 'question-text';
                ta.placeholder = '√âcris ta question ici...';
                container.appendChild(ta);
            } else {
                const previewTag = type;
                container.innerHTML = `
                    <${previewTag} id="question-preview" controls></${previewTag}>
                    <button id="question-start-record" class="btn btn-primary"><i class="fas fa-microphone"></i> Enregistrer ${type === 'audio' ? 'audio' : 'vid√©o'}</button>
                    <button id="question-stop-record" class="btn btn-warning" style="display:none;"><i class="fas fa-stop"></i> Stop</button>
                `;
                document.getElementById('question-start-record').onclick = () => startRecording(type, 'question');
                document.getElementById('question-stop-record').onclick = () => stopRecording('question');
            }
        }
        
        // Mettre √† jour l'input de r√©ponse
        function updateResponseInput(type) {
            const container = document.getElementById('response-input');
            container.innerHTML = '';
            if (type === 'text') {
                const ta = document.createElement('textarea');
                ta.id = 'response-text';
                ta.placeholder = '√âcris ta r√©ponse ici...';
                container.appendChild(ta);
            } else {
                const previewTag = type;
                container.innerHTML = `
                    <${previewTag} id="response-preview" controls></${previewTag}>
                    <button id="response-start-record" class="btn btn-primary"><i class="fas fa-microphone"></i> Enregistrer ${type === 'audio' ? 'audio' : 'vid√©o'}</button>
                    <button id="response-stop-record" class="btn btn-warning" style="display:none;"><i class="fas fa-stop"></i> Stop</button>
                `;
                document.getElementById('response-start-record').onclick = () => startRecording(type, 'response');
                document.getElementById('response-stop-record').onclick = () => stopRecording('response');
            }
        }
        
        // D√©marrer l'enregistrement
        function startRecording(type, prefix) {
            const constraints = { audio: true, video: type === 'video' };
            navigator.mediaDevices.getUserMedia(constraints)
                .then(stream => {
                    currentStream = stream;
                    currentRecorder = new MediaRecorder(stream);
                    chunks = [];
                    currentRecorder.ondataavailable = e => chunks.push(e.data);
                    currentRecorder.onstop = () => {
                        const blobType = type === 'audio' ? 'audio/mpeg' : 'video/mp4';
                        const blob = new Blob(chunks, { type: blobType });
                        const reader = new FileReader();
                        reader.readAsDataURL(blob);
                        reader.onloadend = () => {
                            document.getElementById(`${prefix}-preview`).src = reader.result;
                        };
                    };
                    currentRecorder.start();
                    document.getElementById(`${prefix}-start-record`).style.display = 'none';
                    document.getElementById(`${prefix}-stop-record`).style.display = 'inline-flex';
                    const preview = document.getElementById(`${prefix}-preview`);
                    if (type === 'video') {
                        preview.srcObject = stream;
                        preview.play();
                    }
                })
                .catch(err => {
                    console.error('Erreur d\'acc√®s au m√©dia:', err);
                    addLog('system', 'Impossible d\'acc√®s au microphone/cam√©ra. V√©rifiez les permissions.');
                });
        }
        
        // Arr√™ter l'enregistrement
        function stopRecording(prefix) {
            if (currentRecorder) currentRecorder.stop();
            if (currentStream) currentStream.getTracks().forEach(track => track.stop());
            document.getElementById(`${prefix}-start-record`).style.display = 'inline-flex';
            document.getElementById(`${prefix}-stop-record`).style.display = 'none';
            const preview = document.getElementById(`${prefix}-preview`);
            if (preview.srcObject) preview.srcObject = null;
        }
        
        // Poser une question
        function askQuestion() {
            const type = document.getElementById('question-type').value;
            let content;
            if (type === 'text') {
                content = document.getElementById('question-text').value.trim();
            } else {
                content = document.getElementById('question-preview').src;
            }
            if (!content) {
                addLog('system', 'Veuillez fournir une question !');
                return;
            }
            gameState.currentQuestion = { type, content };
            gameState.pendingResponders = gameState.players.filter(p => p !== gameState.currentAsker);
            gameState.currentResponses = {};
            gameState.turn = 'respond';
            DOMGame.questionDisplay.style.display = 'block';
            addLog(gameState.currentAsker, 'A pos√© une question');
            DOMGame.questionStatus.textContent = 'Question envoy√©e';
            DOMGame.questionStatus.className = 'question-status question-asked';
            DOMGame.questionStatus.style.display = 'block';
            updateUIGame();
        }
        
        // Afficher la question
        function displayQuestion() {
            const q = gameState.currentQuestion;
            if (!q) return;
            DOMGame.currentQuestion.innerHTML = '';
            if (q.type === 'text') {
                DOMGame.currentQuestion.textContent = q.content;
            } else {
                const elem = document.createElement(q.type);
                elem.src = q.content;
                elem.controls = true;
                DOMGame.currentQuestion.appendChild(elem);
            }
        }
        
        // Envoyer la r√©ponse
        function sendResponse() {
            const type = gameState.currentQuestion.type;
            let content;
            if (type === 'text') {
                content = document.getElementById('response-text').value.trim();
            } else {
                content = document.getElementById('response-preview').src;
            }
            if (!content) {
                addLog('system', 'Veuillez fournir une r√©ponse !');
                return;
            }
            let pending = gameState.pendingResponders;
            let selected;
            if (pending.length > 1) {
                selected = document.getElementById('responder-select').value;
            } else if (pending.length === 1) {
                selected = pending[0];
            } else {
                return;
            }
            gameState.currentResponses[selected] = { type, content };
            gameState.pendingResponders = pending.filter(p => p !== selected);
            addLog(selected, 'A r√©pondu √† la question');
            if (gameState.pendingResponders.length === 0) {
                gameState.turn = 'validate';
            }
            DOMGame.questionStatus.textContent = 'Question r√©pondue';
            DOMGame.questionStatus.className = 'question-status question-answered';
            DOMGame.questionStatus.style.display = 'block';
            updateResponseInput(type);
            updateUIGame();
        }
        
        // Afficher les r√©ponses pour validation
        function displayResponses() {
            DOMGame.responseDisplay.innerHTML = '<strong>R√©ponses re√ßues :</strong>';
            for (let key in gameState.currentResponses) {
                const res = gameState.currentResponses[key];
                const div = document.createElement('div');
                div.className = 'response-item';
                div.innerHTML = `<div><strong>R√©ponse de ${capitalize(getName(key))} :</strong></div>`;
                const mediaDiv = document.createElement('div');
                if (res.type === 'text') {
                    mediaDiv.textContent = res.content;
                } else {
                    const elem = document.createElement(res.type);
                    elem.src = res.content;
                    elem.controls = true;
                    mediaDiv.appendChild(elem);
                }
                div.appendChild(mediaDiv);
                const actions = document.createElement('div');
                actions.className = 'response-actions';
                const correct = document.createElement('button');
                correct.className = 'btn btn-primary';
                correct.innerHTML = '<i class="fas fa-check-circle"></i> Bonne';
                correct.onclick = () => validateAnswer('correct', key);
                const wrong = document.createElement('button');
                wrong.className = 'btn btn-warning';
                wrong.innerHTML = '<i class="fas fa-times-circle"></i> Mauvaise';
                wrong.onclick = () => validateAnswer('wrong', key);
                const refuse = document.createElement('button');
                refuse.className = 'btn';
                refuse.style.background = 'linear-gradient(to right, #607D8B, #37474F)';
                refuse.innerHTML = '<i class="fas fa-ban"></i> Refuser';
                refuse.onclick = () => validateAnswer('refuse', key);
                actions.appendChild(correct);
                actions.appendChild(wrong);
                actions.appendChild(refuse);
                div.appendChild(actions);
                DOMGame.responseDisplay.appendChild(div);
            }
            DOMGame.responseDisplay.style.display = 'block';
        }
        
        // Valider une r√©ponse
        function validateAnswer(validationType, responderKey) {
            let message = '';
            let amount = 0;
            const isGuest = gameState.guests.some(g => g.id === responderKey);
            const responder = isGuest ? gameState.guests.find(g => g.id === responderKey) : null;
            let responderAmount = isGuest ? responder.amount : gameState[responderKey];
            
            switch (validationType) {
                case 'correct':
                    amount = 10000;
                    if (gameState.depot >= amount) {
                        if (isGuest) {
                            responder.amount += amount;
                        } else {
                            gameState[responderKey] += amount;
                        }
                        gameState.depot -= amount;
                        message = `Bonne r√©ponse ! ${capitalize(getName(responderKey))} gagne ${amount / 1000} mille`;
                        showTransferAnimation(`+${amount / 1000} mille`, 'positive');
                    } else {
                        message = 'Bonne r√©ponse mais le d√©p√¥t est vide !';
                    }
                    break;
                case 'wrong':
                    amount = 5000;
                    if (responderAmount >= amount) {
                        if (isGuest) {
                            responder.amount -= amount;
                        } else {
                            gameState[responderKey] -= amount;
                        }
                        gameState.depot += amount;
                        message = `Mauvaise r√©ponse ! ${capitalize(getName(responderKey))} perd ${amount / 1000} mille`;
                        showTransferAnimation(`-${amount / 1000} mille`, 'negative');
                    } else {
                        message = `${capitalize(getName(responderKey))} n'a pas assez d'argent !`;
                    }
                    break;
                case 'refuse':
                    amount = 20000;
                    if (responderAmount >= amount) {
                        if (isGuest) {
                            responder.amount -= amount;
                        } else {
                            gameState[responderKey] -= amount;
                        }
                        gameState.depot += amount;
                        message = `R√©ponse refus√©e ! ${capitalize(getName(responderKey))} perd ${amount / 1000} mille`;
                        showTransferAnimation(`-${amount / 1000} mille`, 'negative');
                    } else {
                        message = `${capitalize(getName(responderKey))} n'a pas assez d'argent pour refuser !`;
                    }
                    break;
            }

            addLog('system', message);
            delete gameState.currentResponses[responderKey];
            if (Object.keys(gameState.currentResponses).length === 0) {
                gameState.currentPlayerIndex = (gameState.currentPlayerIndex + 1) % gameState.players.length;
                updatePlayerTurn();
            }
            updateUIGame();
        }
        
        // Ajouter un message au journal
        function addLog(senderKey, message) {
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            const senderName = senderKey === 'system' ? 'Syst√®me' : capitalize(getName(senderKey));
            const className = senderKey === 'system' ? 'system' : getName(senderKey).toLowerCase() === 'ablay' ? 'ablay' : getName(senderKey).toLowerCase() === 'koolo' ? 'koolo' : 'guest';

            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${className}`;
            logEntry.innerHTML = `
                <div class="log-icon">
                    ${senderKey === 'ablay' ? '<i class="fas fa-crown"></i>' : 
                      senderKey === 'koolo' ? '<i class="fas fa-bullseye"></i>' : 
                      senderKey === 'system' ? '<i class="fas fa-info-circle"></i>' : 
                      '<i class="fas fa-user"></i>'}
                </div>
                <div class="log-content">
                    <div class="log-header">
                        <span>${senderName}</span>
                        <span>${timeString}</span>
                    </div>
                    <div>${message}</div>
                </div>
            `;
            DOMGame.logEntries.prepend(logEntry);
        }
        
        // Afficher l'animation de transfert
        function showTransferAnimation(amount, type) {
            DOMGame.transferAmount.textContent = amount;
            DOMGame.transferAmount.className = `transfer-amount ${type === 'negative' ? 'negative' : ''}`;
            DOMGame.transferAnimation.style.display = 'flex';
            setTimeout(() => {
                DOMGame.transferAnimation.style.display = 'none';
            }, 2000);
        }
        
        // Ajouter un invit√©
        function addGuest() {
            const guestName = document.getElementById('guest-name').value.trim();
            if (!guestName) {
                addLog('system', 'Veuillez entrer un nom pour l\'invit√© !');
                return;
            }

            if (gameState.guests.some(g => g.name.toLowerCase() === guestName.toLowerCase())) {
                addLog('system', 'Cet invit√© participe d√©j√† au jeu !');
                return;
            }

            const newGuest = {
                id: 'guest' + Date.now(),
                name: guestName,
                amount: 0
            };

            gameState.guests.push(newGuest);
            gameState.players.push(newGuest.id);
            addLog('system', `Un invit√© a rejoint le jeu : ${guestName}`);
            document.getElementById('guest-name').value = '';
            updateUIGame();
        }
        
        // Obtenir le nom du joueur
        function getName(key) {
            if (key === 'ablay') return 'ablay';
            if (key === 'koolo') return 'koolo';
            const guest = gameState.guests.find(g => g.id === key);
            return guest ? guest.name : 'inconnu';
        }
        
        // Capitaliser la premi√®re lettre
        function capitalize(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }
        
        // D√©marrer le jeu
        window.addEventListener('DOMContentLoaded', function() {
            // Pr√©charger tous les m√©dias pour une lecture imm√©diate
            const mediaElements = document.querySelectorAll('audio, video');
            mediaElements.forEach(media => {
                media.preload = 'metadata';
            });
            
            initGame();
        });
    </script>
   

</body>
</html>




















